{% extends './layout.html' %}

{% block title %}AppsFly | {{ datos.title }}{% endblock %}

<div class="row  m-0 shadow sticky-top p-0">
    <div class="bg-primary m-0 p-0">
        <nav class="navbar navbar-expand-lg navbar-light bg-primary p-1">
            <div class="container-fluid">
                <a href="/dashboard">
                    <img class="my-2" src="{{ url_for('static', filename='img/logog_principal_vertical.png') }}" alt="Logo AppsFly" href="url_for('login')"  width="120">
                </a>
            </div>
        </nav>
    </div>
</div>

{% block body %}
<div class="row bg-primary">
    <a href="/dashboard">
        <img class="my-2" src="{{ url_for('static', filename='img/logog_principal_vertical.png') }}" alt="Logo AppsFly" href="/"
                        width="120">
    </a>
    
</div>

<div class="row pt-3">
<div class="col-12 col-md-2"></div>
<div class="col-12 col-md-8 p-2">
    <div class="card">
    <div class="card-body">
        <h5 class="card-title text-center mb-3">Nuevo Usuario</h5>
        <form id="createform" action="/usuarios/registar-usuario" method="POST">
            <input value="{{ datos.usuario_id }}" name="usuarioNuevoID" id="usuarioNuevoID" hidden>
            <div class="input-group input-group-sm mb-2">
                <label class="input-group-text {{ error_documento }}" for="usuarioNumeroDocumento">Documento</label>
                    <select value="0" class="input-group-text" name="usuarioTipoDocumento" id="usuarioTipoDocumento" required>
                        <option value="0">Rut</option>
                        <option value="1">Pasaporte</option>
                    </select>
                    <input value="{{ documento_numero }}" type="text" class="form-control" name="usuarioNumeroDocumento" id="usuarioNumeroDocumento" required>
            </div>
            
            <div class="input-group input-group-sm mb-2">
                <label class="input-group-text" for="usuarioNuevoNombre">Nombre y Apellido</label>
                <input value="{{ nombre_apellido }}" type="text" class="form-control" name="usuarioNuevoNombre" id="usuarioNuevoNombre" required>
            </div>
                        
            <div class="input-group input-group-sm mb-2">
                <label class="input-group-text" for="usuarioNuevoCorreo">E-mail</label>
                <input type="email" class="form-control" name="usuarioNuevoCorreo" id="usuarioNuevoCorreo" required>
            </div>
            <div class="input-group input-group-sm mb-2">
                <label class="input-group-text d-none d-sm-block w-2" for="cliente_correo">Contacto</label>
                <select value="{{ numero_area }}" class="input-group-text" name="usuarioNuevoNumeroArea" id="usuarioTipoDocumento" required>
                    <option value="+56">Chile (+56)</option>
                    <option value="+54">Argentina (+54)</option>
                    <option value="+55">Brasil (+55)</option>
                    <option value="+57">Colombia (+57)</option>
                    <option value="+593">Ecuador (+593)</option>
                    <option value="+52">México (+52)</option>
                    <option value="+51">Perú (+51)</option>
                    <option value="+58">Venezuela (+58)</option>
                    <option value="+1-809">Dominicana (+1-809)</option>
                    <option value="+598">Uruguay (+598)</option>
                    <option value="+507">Panamá (+507)</option>
                    <option value="+502">Guatemala (+502)</option>
                    <option value="+503">El Salvador (+503)</option>
                    <option value="+506">Costa Rica (+506)</option>
                    <option value="">otro</option>
                </select>
                <input value="{{ numero_contacto }}" type="tel" name="usuarioNuevoNumeroContacto"  class="form-control">
            </div>

            <div class="{{ style.m_div }} input-group-sm mb-2">
                <label class="{{ style.m_span }} " for="usuarioPasswordNueva">Contraseña</label>
                <input type="password" class="{{ style.m_input }}" name="usuarioPasswordNueva" id="usuarioPasswordNueva" required>
            </div>
            
            <div class="{{ style.m_div }} input-group-sm mb-2">
                <label class="{{ style.m_span }} " for="usuarioPasswordNuevaConfirmada">Contraseña Confirmar</label>
                <input type="password" class="{{ style.m_input }}" name="usuarioPasswordNuevaConfirmada" id="usuarioPasswordNuevaConfirmada" required>
            </div>
            
            <div class="form-check">
            <input class="form-check-input" type="checkbox" value="True" id="flexCheckChecked" required>
            <label class="form-check-label" for="flexCheckChecked" >
                Acepto los <a href="www.appsfly.cl" class="link-dark">terminos y condiciones </a>
            </label>
            </div>
            
            
            
            <small hidden><span class='text-danger'>*</span> Para activar su cuenta, siga los pasos enviados a su correo.</small>

            <hr class="m-2 p-0">

            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                    <a class="btn btn-sm btn-light me-md-2 text-danger " type="button" href="/">Volver</a>
                        <button class="btn btn-sm btn-success" onclick="confirmarCreacion()"
                                type="submit">Registarme</button>
            </div>
        </form>
    </div>
        
    </div>

</div>
<div class="col-12 col-md-2"></div>
</div>

<script>
    function confirmarCreacion() {
        var form = document.getElementById("createform");

        // Verifica la validez del formulario antes de enviarlo
        if (form.checkValidity()) {
            var confirmacion = confirm("¿Desea continuar con la creación de su cuenta?");
            if (confirmacion) {
                form.submit();
            }
        } else {
            alert("Por favor, completa los campos obligatorios.");
        }
    }
</script>
{% endblock %}